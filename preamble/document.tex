% LTeX: enabled=false
% cSpell:disable

\usepackage{kantlipsum}

% Coloured boxes for questions

\usepackage[most]{tcolorbox}


% Page size

\usepackage{geometry}
\geometry{a4paper, lmargin=2cm, rmargin=2.5cm, tmargin=3.5cm, bmargin=2.5cm}

% Paragraph spacing

% \usepackage{parskip}
% \setlength{\parindent}{3cm}


% Headers

\usepackage{titlesec}
\usepackage{titling}
\usepackage{titletoc}

\usepackage[titles]{tocloft}

% \setlength{\cftsecindent}{0pt}
\setlength{\cftsubsecindent}{0pt}
% \renewcommand\cftsecafterpnum{\vskip30pt}
\renewcommand\numberline[1]{}
% Changes style of section title

\titleformat{\section}{\normalfont\large\bfseries}{}{0em}{}
% \titleformat{\subsection}{\normalfont\Large\bfseries}{Question \thesubsection}{0em}{}


\setlength{\parskip}{10pt}
\setlength{\parindent}{0pt}


% Changing contents page 

\renewcommand*{\contentsname}{}
\dottedcontents{section}[0em]{\normalfont\Large}{50em}{1pc}
% \setlength{\cftbeforesecskip}{5em}


% To do with question environment

\usepackage{enumerate}

\newlength{\qspace}
\setlength{\qspace}{15pt}

% Question environment
% Would like to try to get this to start a subsection called `Question qnumber'

\newcounter{qnumber}
\setcounter{qnumber}{1}

\newcommand{\newq}{\section[Problem \theqnumber]{}}


% Question environment with the qnumber. at the beginning 

% \newenvironment{question}%
%  {\begin{tcolorbox}\vspace{\qspace}
%   \begin{enumerate}%
%     \setcounter{enumi}{ \the\numexpr\value{qnumber}-1\relax}%
%     \item%
%  }
% {
%   \end{enumerate}\vspace{5pt}\end{tcolorbox}\vspace{1em}
%   \filbreak
%   \stepcounter{qnumber}
% }

% Question environment without the qnumber. at the beginning (not necessary because its in the section title)
% Uncomment above if you want that 

\newenvironment{question}%
{\newq\begin{tcolorbox}[title=Problem \theqnumber]
}
{
  \end{tcolorbox}\vspace{1em}
  \stepcounter{qnumber}
}


\newenvironment{questionparts}[1][1]%
{
  \begin{enumerate}[\bfseries (i)]%
    \setcounter{enumii}{#1}
    \addtocounter{enumii}{-1}
    \setlength{\itemsep}{5mm}
    \setlength{\parskip}{8pt}
}
{
  \end{enumerate}
}

\newenvironment{questionsubparts}[1][1]%
{
  \begin{enumerate}[\bfseries (a)]%
    \setcounter{enumiii}{#1}
    \addtocounter{enumiii}{-1}
    \setlength{\itemsep}{5mm}
    \setlength{\parskip}{8pt}
}
{
  \end{enumerate}
}

%  Solution and solutionparts environments
\newenvironment{solution}{\textbf{Solution}\vspace{1em}\\}{}

\newenvironment{solutionparts}[1][1]%
{
  \begin{enumerate}[\bfseries (i)]%
    \setcounter{enumii}{2}
    \addtocounter{enumii}{-1}
    \setlength{\itemsep}{5mm}
    \setlength{\parskip}{8pt}
}
{
  \end{enumerate}
}

\newenvironment{solutionsubparts}[1][1]%
{
  \begin{enumerate}[\bfseries (a)]%
    \setcounter{enumii}{2}
    \addtocounter{enumii}{-1}
    \setlength{\itemsep}{5mm}
    \setlength{\parskip}{8pt}
}
{
  \end{enumerate}
}


\newcommand{\pts}[1]{\hfill \textbf{(#1)}}